import{d as N,j as V,b as s,o as S,c as k,w as a,f as e,u as A,D as X,g as C,G as W,H as j,e as l,y as L,_ as P,a as E,I as D,q as Y,E as I,k as R,J as O,F as z,x as $,s as G,t as ee,n as T}from"./index-01cbf18e.js";import{g as te,u as ae}from"./medical-c6f0a0f6.js";const Ve="/assets/u152-afc6c5ee.svg",ke="/assets/u159-84d68de5.svg",Fe="/assets/u164-5ba02e26.svg",x=[{name:"default",label:"清新绿",primary:"#4a9e5c",secondary:"#3d8a4e",gradientStart:"#f5f7fa",gradientEnd:"#e4ecf7",textColor:"#2c3e50",textColorSecondary:"#606266",headerTextColor:"#2c3e50"},{name:"warm",label:"暖阳橙",primary:"#f4511e",secondary:"#ff7043",gradientStart:"#fff3e0",gradientEnd:"#ffe0b2",textColor:"#333333",textColorSecondary:"#666666"},{name:"elegant",label:"优雅紫",primary:"#6a1b9a",secondary:"#8e24aa",gradientStart:"#f3e5f5",gradientEnd:"#e1bee7",textColor:"#2c2c2c",textColorSecondary:"#4a4a4a"},{name:"ocean",label:"海洋蓝",primary:"#0277bd",secondary:"#039be5",gradientStart:"#e1f5fe",gradientEnd:"#b3e5fc",textColor:"#263238",textColorSecondary:"#455a64"},{name:"forest",label:"森林绿",primary:"#2e7d32",secondary:"#388e3c",gradientStart:"#e8f5e9",gradientEnd:"#c8e6c9",textColor:"#1b5e20",textColorSecondary:"#33691e"},{name:"sunset",label:"日落红",primary:"#c62828",secondary:"#d32f2f",gradientStart:"#ffebee",gradientEnd:"#ffcdd2",textColor:"#b71c1c",textColorSecondary:"#c62828"},{name:"tech",label:"科技蓝",primary:"#0288d1",secondary:"#03a9f4",gradientStart:"#e1f5fe",gradientEnd:"#b3e5fc",textColor:"#01579b",textColorSecondary:"#0277bd"},{name:"nature",label:"自然棕",primary:"#795548",secondary:"#8d6e63",gradientStart:"#efebe9",gradientEnd:"#d7ccc8",textColor:"#3e2723",textColorSecondary:"#4e342e"}],q=x[0],K=r=>{const d=x.find(p=>p.name===r)||q;document.documentElement.style.setProperty("--primary-color",d.primary),document.documentElement.style.setProperty("--secondary-color",d.secondary),document.documentElement.style.setProperty("--background-gradient-start",d.gradientStart),document.documentElement.style.setProperty("--background-gradient-end",d.gradientEnd),document.documentElement.style.setProperty("--text-color",d.textColor),document.documentElement.style.setProperty("--text-color-secondary",d.textColorSecondary),document.documentElement.style.setProperty("--header-text-color",d.headerTextColor||d.textColor),document.documentElement.style.setProperty("--card-background","rgba(255, 255, 255, 0.95)"),document.documentElement.style.setProperty("--header-background","linear-gradient(90deg, #ffffff, var(--background-gradient-start))"),document.documentElement.style.setProperty("--menu-hover","rgba(0, 0, 0, 0.1)"),document.documentElement.style.setProperty("--table-text-color","#2c3e50"),document.documentElement.style.setProperty("--table-header-color","#606266"),document.documentElement.style.setProperty("--table-row-hover","#f5f7fa")},oe={class:"avatar-container"},ne=["src"],le={class:"username"},se=N({__name:"UserInfo",emits:["settings"],setup(r,{expose:d,emit:p}){V.currentRoute.value;const _=localStorage.getItem("name")||"",v=localStorage.getItem("avatarPreview")||"",n=p,i=t=>{switch(t){case"profile":localStorage.getItem("userType")==="2"?V.push("/doctor/info"):V.push("/patient/personalInformation");break;case"settings":n("settings");break;case"logout":u();break}},u=()=>{localStorage.removeItem("accountAddress"),localStorage.removeItem("name"),localStorage.removeItem("userId"),V.push("/login")};return d({username:_,savedPreview:v,handleCommand:i,logout:u}),(t,w)=>{const f=s("el-icon"),y=s("el-dropdown-item"),m=s("el-dropdown-menu"),B=s("el-dropdown");return S(),k(B,{onCommand:i,trigger:"click"},{dropdown:a(()=>[e(m,null,{default:a(()=>[e(y,{command:"profile"},{default:a(()=>[e(f,null,{default:a(()=>[e(A(X))]),_:1}),C("个人主页 ")]),_:1}),e(y,{command:"settings"},{default:a(()=>[e(f,null,{default:a(()=>[e(A(W))]),_:1}),C("设置 ")]),_:1}),e(y,{divided:"",command:"logout"},{default:a(()=>[e(f,null,{default:a(()=>[e(A(j))]),_:1}),C("退出登录 ")]),_:1})]),_:1})]),default:a(()=>[l("div",oe,[l("img",{src:A(v)||"/images/default-avatar.png",alt:"avatar",class:"avatar"},null,8,ne),l("span",le,L(A(_)),1)])]),_:1})}}});const re=P(se,[["__scopeId","data-v-b7ceb153"]]),de=["src"],ce={class:"dialog-footer"},ie=N({__name:"SettingsDialog",props:{visible:{type:Boolean}},emits:["update:visible","save"],setup(r,{expose:d,emit:p}){const _=r,v=p,n=E(_.visible),i=E(""),u=E(null),t=E({avatar:localStorage.getItem("avatar")||"",name:localStorage.getItem("name")||"",gender:"",age:0,email:""});D(()=>_.visible,o=>{n.value=o}),D(n,o=>{v("update:visible",o)});const w=localStorage.getItem("avatarPreview");Y(()=>{te(m).then(o=>{t.value.name=o.name,t.value.gender=o.gender,t.value.age=o.age,t.value.email=o.email,!t.value.avatar&&o.avatar&&(t.value.avatar=o.avatar,i.value=`/api/images/${o.avatar}`,localStorage.setItem("avatar",o.avatar))})});const f=o=>{u.value=o.raw;const c=new FileReader;c.onload=h=>{var b;const U=(b=h.target)==null?void 0:b.result;i.value=U,t.value.avatar=o.raw.name,localStorage.setItem("avatarPreview",U),console.log("已选择文件:",o.raw.name)},c.readAsDataURL(o.raw)},y=o=>{const c=o.type==="image/jpeg"||o.type==="image/png",h=o.size/1024/1024<2;return c||I.error("上传头像图片只能是 JPG/PNG 格式!"),h||I.error("上传头像图片大小不能超过 2MB!"),c&&h},m=parseInt(localStorage.getItem("userId")||"0"),B=async()=>{try{(await ae({userId:m,name:t.value.name,gender:t.value.gender,age:t.value.age,email:t.value.email,avatar:t.value.avatar})).code===200?(localStorage.setItem("avatar",t.value.avatar),localStorage.setItem("name",t.value.name),i.value&&i.value.startsWith("data:")&&localStorage.setItem("avatarPreview",i.value),v("save",t.value),n.value=!1,I.success("设置已保存")):I.error("设置保存失败")}catch(o){console.error("保存设置时出错:",o),I.error("保存设置失败")}};return d({dialogVisible:n,form:t,imageUrl:i,handleAvatarChange:f,beforeAvatarUpload:y,saveSettings:B}),(o,c)=>{const h=s("el-icon"),U=s("el-upload"),b=s("el-form-item"),F=s("el-input"),Q=s("el-option"),J=s("el-select"),Z=s("el-form"),M=s("el-button"),H=s("el-dialog");return S(),k(H,{modelValue:n.value,"onUpdate:modelValue":c[5]||(c[5]=g=>n.value=g),title:"设置",width:"500px"},{footer:a(()=>[l("span",ce,[e(M,{onClick:c[4]||(c[4]=g=>n.value=!1)},{default:a(()=>[C("取消")]),_:1}),e(M,{type:"primary",onClick:B},{default:a(()=>[C("保存")]),_:1})])]),default:a(()=>[e(Z,{model:t.value,"label-width":"100px"},{default:a(()=>[e(b,{label:"头像"},{default:a(()=>[e(U,{class:"avatar-uploader",action:"#","auto-upload":!1,"show-file-list":!1,"on-change":f,"before-upload":y},{default:a(()=>[A(w)?(S(),R("img",{key:0,src:A(w),class:"avatar"},null,8,de)):(S(),k(h,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[e(A(O))]),_:1}))]),_:1})]),_:1}),e(b,{label:"姓名"},{default:a(()=>[e(F,{modelValue:t.value.name,"onUpdate:modelValue":c[0]||(c[0]=g=>t.value.name=g)},null,8,["modelValue"])]),_:1}),e(b,{label:"性别"},{default:a(()=>[e(J,{modelValue:t.value.gender,"onUpdate:modelValue":c[1]||(c[1]=g=>t.value.gender=g)},{default:a(()=>[e(Q,{label:"男",value:"男"}),e(Q,{label:"女",value:"女"})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"年龄"},{default:a(()=>[e(F,{modelValue:t.value.age,"onUpdate:modelValue":c[2]||(c[2]=g=>t.value.age=g)},null,8,["modelValue"])]),_:1}),e(b,{label:"邮箱"},{default:a(()=>[e(F,{modelValue:t.value.email,"onUpdate:modelValue":c[3]||(c[3]=g=>t.value.email=g)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}});const me=P(ie,[["__scopeId","data-v-f7eec402"]]),ue=N({name:"BaseLayout",components:{UserInfo:re,SettingsDialog:me},setup(){const r=E(q.name),d=E(!1),p=n=>{const i=x.find(u=>u.name===n);i&&(r.value=n,K(i.name),localStorage.setItem("theme",n))},_=()=>{d.value=!0,console.log("showSettings")},v=n=>{console.log("Settings saved:",n)};return Y(()=>{const n=localStorage.getItem("theme");if(n){const i=x.find(u=>u.name===n);i&&(r.value=n,K(i.name))}}),{currentTheme:r,settingsVisible:d,handleThemeChange:p,showSettings:_,handleSettingsSave:v,themes:x}}}),ge="/assets/u12-e83c1b76.png",pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAmCAYAAACsyDmTAAAAAXNSR0IArs4c6QAAA6RJREFUWAnNmElrVEEUhTsaoyQ4bVxIiEicdxJRQSE44JCQlbhwlYX/yj8gKuJCEgWDIrpwykaJEY1mQBLMRjAaIsbhfN11H7dfv/d6ek08cF7dqq6699RcdKHwn6GtTj3rVH+nuF3cLHaKy+KS+FWcF/+IDaNWQfsUoU88KHZlRPuh3ybFcfF9Rr3Un6oJ6lbLQRFB9QJBI+LnehpmCeqXoyHR1/mt/JQ4J34TmS6mbYvYI+4R14uGvzLuio+toFrqg1ldHF4Sj1mB0lVxVHwurohp2KQfaDcgtrtKtLst0qFM+N5YxcsyvBhG45r4VkRYFvh9VnwtMmJbRdAtMooTZLIQF8Q0nQkN2C33xBvi91BWa8LifikisFdkJhDF6CI4FV4QDYZFm8absp+KrINGQLtpkY7tDQ72K2WkWX+J4FwxsJtMDEJe2A9Npo/UnmkH+CdOKkwQ29q2NsPNAs4LjNB1kekDPlapxH1NEIeeYUzGT8vklC7KD+vR4ONZWTFFEOQEBvTmVdHK//NMLm3bE88GoywShdxNXaH0o9LlYOedsMOmglPiEbcCCOKiNGRuSavURDrn2vq4UTGCuLUNqdvRKjSZev8+buQWQZ1RrlBgh7USfjn4uFFMBPlKtpaiCjkbXkTinYigJReU+6aV8P4TryME8dIz7DKjRWmP88vZVAEEzYu2drgI/bBWNGiigKcJ7yVAvIWiFfsgiMNwMpSTPxLsvJPjcmiXOa9JLt8KIACMl5Li96y+G10+D3OHnFx0jp44u8w0QSiGgJ02ULTy+RDjitge3H1SmnoAmyDqjog2jCdlH6UwB5ySD1vM3GV3snzanFKHU5RbnkcUOCSyvuiNCZVZM+jsafGC2BZajSp9E+zExAuiAsG3id0iTnjpHRCnRduJMquCNXNVZIOYGBrNiFzgqYgLouI7kQMMUYCHOjvkl/hFXBXTwNY+IQ6LSZdnr8oRmCrKq1e9MvQrNyT6OqyBKXFOZIqXRc4tOsA64ZzxnaQ+D7MO8ZxoeCDjvmV86oP5crMZpUGRZ2e9YDexgDl4AYLOF63SJ1GU742rG5mMAmfUTChh+jqCnZSwzibEWyIB/T1p02SnNdNHfEY8QrURiioGg53DS8//+7GiPBflorggVtuR8ZEaU5vovV2vILXNBXFRD+WVc7BsAeYSqUYn8enbrXYbxA/V1lCN/huqliRqdi0F0Yu4KHt1NNTDPBtxIxwW13qAKvv0D3EinzLL+UroAAAAAElFTkSuQmCC",_e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAqCAYAAADS4VmSAAAAAXNSR0IArs4c6QAAAllJREFUWAntmE9LVUEYxm9ahtEfLUmyQqMWiRF+g6KV0MZ10C4Q/AB9iBbtBaGFi1q6CdpV7qIWhUERVguREKmgQqMuXX/PZeb6zjjnes65oQjngefOO++8/+47Z65nrNX2GAc6yH8E3ynnP8O4XiZWVxkn5zPGeM5RcimULeAE2S6YjJKlK4wiW3Ce6FfgKDybkWkF/Tv4Fi5n2ATqPAWoSzfh9cBz58kzTB7Df+1MdyrgGM634UUTpI78BerbioI6Ip6BB6HHR4Q5+NMr4rFdAQp4Bx53Tg3G5/AJ/Ot08XAIxQS8Bn3sH8iz0BeLuIXuLTGQdMSmYZ/TfmV8AF/Adi3V2ge4BNU1xTkML8NXcFvhWQXcwngECkp+H65pkhPfsXsJx6GK6IUD8A0MkDqGetqvOiu1/SH87eZFBvk8goohKKZiB0gVcMNYaM8/m3lR8RMOiuFhYzd1cQHaEu2XoKddD1ynUAzFEhQ72Pa4gGEMemQJdNS2PTTNlWIfiqFYgmIrRwtxAadaKxnHxqwXEe0RPGkd4wKOmkXrZNSlRBtLP24txAX49ssg89er5Z1fsLFsjlpcQP6Q/8myKqDqQNWBqgNVB6oOVB3Y8w74a5Rek/QOf8n8mdd8yMw7EU8bZ+XQe+Jr+M1fn+4yGYS7iVWS3fNb8Gs3M7tczZy+A9oKtUZjHkxi1B8Z6jo2H+mypron6P5Y9wmleJ9lndBPJHS6iukfE4Xgt6CQE8YbCYeULmEWqsoWsBiGac5SuoRZqAruaeFS29kyq3p+dLz+wAX4FDbg/sImfYVWUGUJAscAAAAASUVORK5CYII=";const ve={class:"header"},fe=l("div",{class:"logo"},[l("img",{src:ge,alt:"logo"}),l("h1",null,"云链·医问")],-1),ye={class:"user-info"},be={class:"theme-grid"},Ae={class:"theme-preview"},Se={class:"color-preview"},he={class:"theme-label"},Ee=l("img",{src:pe,alt:"notification"},null,-1),Ce=l("img",{src:_e,alt:"message"},null,-1),we={class:"sidebar"},Ie={class:"main-content"};function xe(r,d,p,_,v,n){const i=s("el-button"),u=s("el-dropdown-item"),t=s("el-dropdown-menu"),w=s("el-dropdown"),f=s("UserInfo"),y=s("SettingsDialog");return S(),R("div",{id:"base",class:ee(r.currentTheme)},[l("div",ve,[fe,l("div",ye,[e(w,{onCommand:r.handleThemeChange,trigger:"click"},{dropdown:a(()=>[e(t,{class:"theme-dropdown"},{default:a(()=>[l("div",be,[(S(!0),R(z,null,$(r.themes,m=>(S(),k(u,{key:m.name,command:m.name,class:"theme-item"},{default:a(()=>[l("div",Ae,[l("div",Se,[l("div",{class:"color-block primary",style:T({background:m.primary})},null,4),l("div",{class:"color-block secondary",style:T({background:m.secondary})},null,4)]),l("span",he,L(m.label),1)])]),_:2},1032,["command"]))),128))])]),_:1})]),default:a(()=>[e(i,{type:"primary",class:"theme-button"},{default:a(()=>[C(" 主题设置 ")]),_:1})]),_:1},8,["onCommand"]),Ee,Ce,e(f,{onSettings:r.showSettings},null,8,["onSettings"])])]),l("div",we,[G(r.$slots,"sidebar")]),l("div",Ie,[G(r.$slots,"default")]),e(y,{visible:r.settingsVisible,"onUpdate:visible":d[0]||(d[0]=m=>r.settingsVisible=m),onSave:r.handleSettingsSave},null,8,["visible","onSave"])],2)}const Re=P(ue,[["render",xe]]);export{Re as B,Ve as _,ke as a,Fe as b};
